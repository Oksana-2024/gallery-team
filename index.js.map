{"version":3,"file":"index.js","sources":["../src/js/unsplash-api.js","../src/js/refs.js","../src/js/createmarkup.js","../src/js/loader.js","../src/js/loadmore.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\nexport const PER_PAGE = 12;\nexport async function getPhotos(query, page) {\n  const BASE_URL = 'https://api.unsplash.com';\n  const API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n  const endPoint = '/search/photos';\n\n  try {\n    const response = await axios.get(`${BASE_URL}${endPoint}`, {\n      params: {\n        query,\n        page,\n        per_page: PER_PAGE,\n        orientation: 'portrait',\n        client_id: API_KEY,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export const refs = {\n  form: document.querySelector('.js-search-form '),\n  list: document.querySelector('.js-gallery '),\n  loader: document.querySelector('.loader'),\n  loadmore: document.querySelector('.js-load-more'),\n};\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      item => ` <li class=\"gallery__item\">\n                <img src=\"${item.urls.small}\" alt=\"${item.description}\">\n            </li>`\n    )\n    .join('');\n}\n","import { refs } from './refs';\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n","import { refs } from './refs';\nexport function showBtn() {\n  refs.loadmore.classList.remove('is-hidden');\n}\nexport function hideBtn() {\n  refs.loadmore.classList.add('is-hidden');\n}\n","import { getPhotos, PER_PAGE } from './unsplash-api';\nimport { refs } from './refs';\nimport { createMarkup } from './createmarkup';\nimport { showLoader, hideLoader } from './loader';\nimport { showBtn, hideBtn } from './loadmore';\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadmore.addEventListener('click', onClick);\nlet page = 1;\nlet searchQuery = null;\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  refs.list.innerHTML = '';\n  showLoader();\n  page = 1;\n\n  searchQuery = event.target.elements['user-search-query'].value.trim();\n\n  try {\n    const responce = await getPhotos(searchQuery, page);\n    refs.list.innerHTML = createMarkup(responce.results);\n\n    responce.total > PER_PAGE ? showBtn() : hideBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onClick(event) {\n  page += 1;\n  showLoader();\n\n  try {\n    const responce = await getPhotos(searchQuery, page);\n    refs.list.insertAdjacentHTML('beforeend', createMarkup(responce.results));\n\n    const lastPage = Math.ceil(responce.total / PER_PAGE);\n\n    lastPage === page ? hideBtn() : showBtn();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["PER_PAGE","getPhotos","query","page","BASE_URL","API_KEY","endPoint","axios","error","refs","createMarkup","arr","item","showLoader","hideLoader","showBtn","hideBtn","onSubmit","onClick","searchQuery","event","responce"],"mappings":"svBACO,MAAMA,EAAW,GACjB,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAW,2BACXC,EAAU,8CACVC,EAAW,iBAEjB,GAAI,CAUF,OATiB,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGE,CAAQ,GAAI,CACzD,OAAQ,CACN,MAAAJ,EACA,KAAAC,EACA,SAAUH,EACV,YAAa,WACb,UAAWK,CACZ,CACP,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCrBO,MAAMC,EAAO,CAClB,KAAM,SAAS,cAAc,kBAAkB,EAC/C,KAAM,SAAS,cAAc,cAAc,EAC3C,OAAQ,SAAS,cAAc,SAAS,EACxC,SAAU,SAAS,cAAc,eAAe,CAClD,ECLO,SAASC,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACCC,GAAQ;AAAA,4BACcA,EAAK,KAAK,KAAK,UAAUA,EAAK,WAAW;AAAA,kBAEhE,EACA,KAAK,EAAE,CACZ,CCPO,SAASC,GAAa,CAC3BJ,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CACO,SAASK,GAAa,CAC3BL,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CCLO,SAASM,GAAU,CACxBN,EAAK,SAAS,UAAU,OAAO,WAAW,CAC5C,CACO,SAASO,GAAU,CACxBP,EAAK,SAAS,UAAU,IAAI,WAAW,CACzC,CCAAA,EAAK,KAAK,iBAAiB,SAAUQ,CAAQ,EAC7CR,EAAK,SAAS,iBAAiB,QAASS,CAAO,EAC/C,IAAIf,EAAO,EACPgB,EAAc,KAElB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EACpBX,EAAK,KAAK,UAAY,GACtBI,IACAV,EAAO,EAEPgB,EAAcC,EAAM,OAAO,SAAS,mBAAmB,EAAE,MAAM,OAE/D,GAAI,CACF,MAAMC,EAAW,MAAMpB,EAAUkB,EAAahB,CAAI,EAClDM,EAAK,KAAK,UAAYC,EAAaW,EAAS,OAAO,EAEnDA,EAAS,MAAQrB,EAAWe,EAAS,EAAGC,EAAO,CAChD,OAAQR,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRM,GACD,CACH,CAEA,eAAeI,EAAQE,EAAO,CAC5BjB,GAAQ,EACRU,IAEA,GAAI,CACF,MAAMQ,EAAW,MAAMpB,EAAUkB,EAAahB,CAAI,EAClDM,EAAK,KAAK,mBAAmB,YAAaC,EAAaW,EAAS,OAAO,CAAC,EAEvD,KAAK,KAAKA,EAAS,MAAQrB,CAAQ,IAEvCG,EAAOa,EAAS,EAAGD,EAAO,CACxC,OAAQP,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRM,GACD,CACH"}